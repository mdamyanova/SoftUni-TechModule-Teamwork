@using bYteMe.Constants
@using bYteMe.Models
@using Microsoft.AspNet.Identity
@using Microsoft.AspNet.Identity.Owin
@model System.Data.Entity.DbSet<bYteMe.Order>
@{
    ViewBag.Title = "поръчки";
}

<!DOCTYPE html>
<html>
<head>
    <title>поръчки</title>
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
    <link rel="Stylesheet" href="@Href("~/Content/OrdersStyle.css")"/>
</head>
<body>
<div>
    @foreach (var beer in Model)
    {
        var base64 = Convert.ToBase64String(beer.Photo);
        var imgSrc = $"data:image/gif;base64,{base64}";
        <div class="listProducts">
            <ul id="list">
                <li id="currentProduct">
                    <img id="orderImg" class="cut-out" src="@imgSrc" />
                    <span id="orderDescription">@beer.Description</span>
                    <br/>
                    <span id="requiredDislikes">Нужни нехаресвания: @beer.RequiredDislikes</span>
                </li>

                @{ User user = System.Web.HttpContext.Current.GetOwinContext()
                                         .GetUserManager<ApplicationUserManager>()
                                         .FindById(System.Web.HttpContext.Current.User.Identity.GetUserId());
                    if (user.Dislikes < beer.RequiredDislikes)
                    {
                        <button id="orderButton-active">поръчай</button>
                    }
                    else
                    {
                        <button id="orderButton" disabled>поръчай</button>
                    }
                }
            </ul>
        </div>
    }
</div>
</body>
</html>

@* Button *@

