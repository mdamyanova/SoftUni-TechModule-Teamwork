@using bYteMe.Constants
@using bYteMe.Models
@using Microsoft.AspNet.Identity
@using Microsoft.AspNet.Identity.Owin
@model System.Data.Entity.DbSet<bYteMe.Order>
@{
    ViewBag.Title = "поръчки";
}

<!DOCTYPE html>
<html>
<head>
    <title>поръчки</title>
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="@Href("~/Content/Site.css")"/>
    <link rel="Stylesheet" href="@Href("~/Content/OrdersStyle.css")"/>
</head>
<body>
<div>
    @foreach (var beer in Model)
    {
        var base64 = Convert.ToBase64String(beer.Photo);
        var imgSrc = $"data:image/gif;base64,{base64}";
        <div class="listProducts">
            <ul id="list">
                <li id="currentProduct">
                    <img id="orderImg" class="cut-out" src="@imgSrc"/>
                    <span id="orderDescription">@beer.Description</span>
                    <span id="requiredDislikes">@beer.RequiredDislikes</span>                       
                </li>
            </ul>
            <button id="orderButton" onclick="validateOrder(beer.RequiredDislikes)">поръчай</button>
        </div>
    }
</div>
</body>
</html>

@* Button *@
@{ User user = System.Web.HttpContext.Current.GetOwinContext()
                          .GetUserManager<ApplicationUserManager>()
                          .FindById(System.Web.HttpContext.Current.User.Identity.GetUserId());}
<script>
    function validateOrder(requiredDislikes) {
        let userDislikes = '@user';
        if (requiredDislikes < userDislikes) {
            //add error here
        }
    }
</script>